var Y=Object.defineProperty;var Z=(s,a,t)=>a in s?Y(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var S=(s,a,t)=>Z(s,typeof a!="symbol"?a+"":a,t);import{t as ee,g as te,j as e,S as se,i as ae,u as B,k as y,L as v,F as re,C as L,A as ne,I as z,m as le,n as D,R as ie,p as oe,c as m,q as O,E as ce,v as de,O as ue,D as me,w as xe,Q as ge,x as pe,y as A,T as _,z as P,B as fe,G as R,H as he,J as q,V as we,P as je,K as ve,M as be,N as ye,U as Ne,W as Se,X as Pe,Y as Ie,Z as Be,_ as ke,$ as Ce,a0 as Ee,a1 as De,a2 as Fe,a3 as Ae,a4 as V,a5 as H,a6 as _e,a7 as Ue,a8 as Te}from"./vendor-BNBf1rr6.js";import{c as $e}from"./react-dom-client-kQNKXb_C.js";import{s as Le}from"./react-dom-server-CLCnoZxZ.js";import"./react-dom-BXLYTlSo.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function g(...s){return ee(te(s))}const ze=ae("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function j({className:s,variant:a,size:t,asChild:n=!1,...r}){const o=n?se:"button";return e.jsx(o,{"data-slot":"button",className:g(ze({variant:a,size:t,className:s})),...r})}const Oe=()=>{const s=B(n=>n.status),a=y(),t=[{name:"Our Story",slug:"/Brown"},{name:"Membership",slug:"/Brown"},{name:"Write",slug:"/Brown/post"}];return e.jsx(e.Fragment,{children:e.jsx(F,{children:e.jsx("nav",{className:"p-4  border-1 border-b-black bg-[#f7f4ed] ",children:e.jsxs("div",{className:"container mx-auto flex flex-row justify-between items-center",children:[e.jsx(v,{to:"/Brown",className:"text-4xl font-extrabold font-cormorant-garamond ",children:"Brown"}),s?e.jsxs("div",{className:"flex justify-evenly gap-x-6 px-9 cursor-pointer",children:[e.jsxs("div",{className:"flex flex-row items-center gap-x-2",children:[e.jsx(v,{to:"/Brown/dashboard",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:e.jsx(j,{className:"  font-roboto text-sm font-medium  ",children:"Dashboard"})}),e.jsx(v,{to:"/Brown/post",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:e.jsxs(j,{className:"font-roboto text-sm font-medium  ",children:[e.jsx(re,{}),"Write"]})})]}),e.jsx(Me,{})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-evenly gap-x-6 px-9 cursor-pointer",children:[t.map(n=>e.jsx("div",{className:"my-auto font-roboto text-sm max-[725px]:hidden",children:e.jsx("div",{onClick:()=>a(n.slug),children:n.name})},n.name)),e.jsx(v,{to:"/Brown/login",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:"Sign in"}),e.jsx(v,{to:"/Brown/sign-up",children:e.jsx(j,{className:" rounded-3xl font-roboto text-sm font-medium  ",children:"Get started"})})]})})]})})})})},Re=()=>{const s=y(),a=[{name:"Help",slug:"/Brown/help",class:""},{name:"Status",slug:"/Brown",class:"max-[903px]:hidden"},{name:"About",slug:"/Brown/about",class:""},{name:"Carrer",slug:"/Brown",class:"max-[903px]:hidden"},{name:"Press",slug:"/Brown",class:"max-[903px]:hidden"},{name:"Blog",slug:"/Brown",class:"max-[903px]:hidden"},{name:"Privacy",slug:"/Brown",class:""},{name:"Terms",slug:"/Brown",class:""},{name:"Text To Speech",slug:"/Brown",class:"max-[903px]:hidden"},{name:"Teams",slug:"/Brown",class:"max-[903px]:hidden"}];return e.jsx("div",{children:e.jsx("div",{className:"p-4  border-1 border-black bg-[#f7f4ed] max-[903px]:bg-black max-[903px]:text-white ",children:e.jsx("div",{className:"container  flex flex-row justify-center items-center max-[903px]:justify-start   ",children:e.jsx("div",{className:"flex justify-evenly gap-x-6 px-9 ",children:a.map(t=>e.jsx("div",{className:t.class,children:e.jsx("div",{className:"my-auto font-roboto text-xs font-medium cursor-pointer ",onClick:()=>s(t.slug),children:t.name})},t.name))})})})})},F=({children:s})=>e.jsx("div",{className:"bg-[#f7f4ed]",children:s}),x={appwriteUrl:"https://cloud.appwrite.io/v1",appwriteProjectId:"67bea9dd0027041cae88",appwriteDatabaseId:"67beab91001bd1ccb940",appwriteCollectionId:"67beabb60000b4e9489e",appwriteBucketId:"67bead4f0029938642e9",appwriteApiKey:"standard_bc28567a5b119a2404dec9656a85f4f1517f2a71ab993feadff4bb771d2f33b4bd62c622a33a4bf8710dc12fa4054b2380c1948d167831f008a965363f683e884eee90ac730ffa702e61c5ca729488d144da03d52c90262a4c3bbdd97f84e9a6ae28f910c4f10bc8fe2011402379e81c5be218b566d53ce969ad664a0e194599",tinymceApiKey:"nbnl3lm5o8i1i7fbh1q5ytyyofu7q1w5gvj3bouk4502a10b"};class qe{constructor(){S(this,"client",new L);S(this,"account");this.client.setEndpoint(x.appwriteUrl).setProject(x.appwriteProjectId),this.account=new ne(this.client)}async createAccount({email:a,password:t,name:n}){try{const r=await this.account.create(z.unique(),a,t,n);return r&&this.login({email:a,password:t})}catch(r){return console.log("Appwrite service :: createAccount :: error"),{success:!1,message:r==null?void 0:r.message,type:(r==null?void 0:r.type)||"unknown_error",code:(r==null?void 0:r.code)||500}}}async login({email:a,password:t}){try{return await this.account.createEmailPasswordSession(a,t)}catch(n){return console.log("Appwrite service :: login :: error"),{success:!1,message:n==null?void 0:n.message,type:(n==null?void 0:n.type)||"unknown_error",code:(n==null?void 0:n.code)||500}}}async getCurrentUser(){try{return await this.account.get()}catch{console.log("Appwrite service :: getCurrentUser :: error")}return{success:!1,message:error==null?void 0:error.message,type:(error==null?void 0:error.type)||"unknown_error",code:(error==null?void 0:error.code)||500}}async logout(){try{await this.account.deleteSessions()}catch(a){console.log("Appwrite service :: logout :: error",a)}}}const I=new qe,Ve={status:!1,userData:null},M=le({name:"auth",initialState:Ve,reducers:{login:(s,a)=>{if(!a.payload||!a.payload.userData){console.log("login: Invalid action payload",a.payload);return}s.status=!0,s.userData=a.payload.userData},logout:(s,a)=>{s.status=!1,s.userData=null}}}),{login:U,logout:K}=M.actions,He=M.reducer,Me=()=>{const s=D(),a=()=>{I.logout().then(()=>{s(K())}).catch(t=>console.log("Error Logging Out User LogoutBtn.jsx :: LogoutBtn :: error",t))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row gap-x-4",children:[e.jsx(j,{className:"rounded-3xl font-roboto text-sm font-medium ",onClick:a,children:"Logout"}),e.jsx("img",{className:"w-10 h-10 rounded-full",src:"https://flowbite.com/docs/images/people/profile-picture-5.jpg"})]})})};function G({className:s,value:a,...t}){return e.jsx(ie,{"data-slot":"progress",className:g("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...t,children:e.jsx(oe,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}const C=({children:s,authentication:a=!0})=>{const t=y(),[n,r]=m.useState(!0),[o,d]=m.useState(0),l=B(f=>f.status);return m.useEffect(()=>{a&&l!==a?t("/Brown/login"):!a&&l!==a&&t("/Brown/dashboard");let f=setInterval(()=>{d(u=>u>=100?(clearInterval(f),100):u+10)},100);return setTimeout(()=>{clearInterval(f),r(!1)},1e3),()=>clearInterval(f)},[l,t,a]),n?e.jsxs("div",{children:[e.jsx(G,{value:o}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[83vh] bg-black text-white",children:[e.jsx("div",{className:"relative w-16 h-16 border-4 border-gray-500 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Please wait..."})]})]}):e.jsxs(e.Fragment,{children:[" ",s," "]})},Ke=({name:s,control:a,label:t,defaultValue:n=""})=>e.jsxs("div",{children:[e.jsx("div",{className:"w-full",children:t&&e.jsx("label",{className:"inline-block mb-1 pl-1",children:t})}),e.jsx(O,{name:s,control:a,render:({field:{onChange:r}})=>e.jsx(ce,{apiKey:x.tinymceApiKey,initialValue:n,init:{height:500,menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onEditorChange:r})})]}),Ge=de({reducer:He}),We=()=>{const[s,a]=m.useState(!0),[t,n]=m.useState(0),r=D();return m.useEffect(()=>{I.getCurrentUser().then(d=>r(d?U({userData:d}):K())).catch(d=>console.log("Error fetching user:",d));let o=setInterval(()=>{n(d=>d>=100?(clearInterval(o),100):d+10)},200);return setTimeout(()=>{clearInterval(o),a(!1)},2e3),()=>clearInterval(o)},[r]),s?e.jsxs("div",{children:[e.jsx(G,{value:t}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black text-white",children:[e.jsx("div",{className:"relative w-16 h-16 border-4 border-gray-500 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Please wait..."})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"layout min-h-screen flex flex-col",children:[e.jsx(Oe,{}),e.jsx("main",{className:"content flex-grow",children:e.jsx(ue,{})}),e.jsx(Re,{className:"mt-auto"})]})})};class Qe{constructor(){S(this,"client",new L);S(this,"databases");S(this,"bucket");this.client.setEndpoint(x.appwriteUrl).setProject(x.appwriteProjectId),this.databases=new me(this.client),this.bucket=new xe(this.client)}async createPost({title:a,slug:t,content:n,featuredImage:r,status:o,userId:d}){try{return await this.databases.createDocument(x.appwriteDatabaseId,x.appwriteCollectionId,t,{title:a,content:n,featuredImage:r,status:o,userId:d})}catch(l){return console.log("Appwrite service :: createPost :: error"),{success:!1,message:l==null?void 0:l.message,type:(l==null?void 0:l.type)||"unknown_error",code:(l==null?void 0:l.code)||500}}}async updatePost(a,{title:t,content:n,featuredImage:r,status:o}){try{return await this.databases.updateDocument(x.appwriteDatabaseId,x.appwriteCollectionId,a,{title:t,content:n,featuredImage:r,status:o})}catch(d){return console.log("Appwrite service :: updatePost :: error"),{success:!1,message:d==null?void 0:d.message,type:(d==null?void 0:d.type)||"unknown_error",code:(d==null?void 0:d.code)||500}}}async deletePost(a){try{return await this.databases.deleteDocument(x.appwriteDatabaseId,x.appwriteCollectionId,a),!0}catch(t){return console.log("Appwrite service :: deletePost :: error"),{success:!1,message:(t==null?void 0:t.message)||!1,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async getPost(a){try{return await this.databases.getDocument(x.appwriteDatabaseId,x.appwriteCollectionId,a)}catch(t){return console.log("Appwrite service :: getPost :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async getPosts(a=[ge.equal("status","active")]){try{return await this.databases.getDocument(x.appwriteDatabaseId,x.appwriteCollectionId,a)}catch(t){return console.log("Appwrite service :: getPosts :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async uploadFile(a){try{return await this.bucket.createFile(x.appwriteBucketId,z.unique(),a)}catch(t){return console.log("Appwrite service :: uploadFile :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async deleteFile(a){try{return await this.bucket.deleteFile(x.appwriteBucketId,a),!0}catch(t){return console.log("Appwrite service :: deleteFile :: error"),{success:!1,message:(t==null?void 0:t.message)||!1,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}getFilePreview(a){return this.bucket.getFilePreview(x.appwriteBucketId,a)}}const w=new Qe;function T({$id:s,className:a,...t}){return s?e.jsx(v,{to:`/Brown/post/${s}`,"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t}):e.jsx("div",{"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm ",a),...t})}function Je({className:s,...a}){return e.jsx("div",{"data-slot":"card-header",className:g("flex flex-col gap-1.5 px-6",s),...a})}function W({className:s,...a}){return e.jsx("div",{"data-slot":"card-title",className:g("leading-none font-semibold",s),...a})}function Xe({className:s,featuredImage:a="",...t}){return e.jsx("img",{src:w.getFilePreview(a),alt:"Image Here","data-slot":"card-image",className:g("",s),...t})}function Ye({className:s,...a}){return e.jsx("div",{"data-slot":"card-description",className:g("text-muted-foreground text-sm",s),...a})}function Q({className:s,...a}){return e.jsx("div",{"data-slot":"card-content",className:g("px-6",s),...a})}const b=m.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,ref:n,"data-slot":"input",className:g("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t}));b.displayName="Input";function E({className:s,...a}){return e.jsx(pe,{"data-slot":"label",className:g("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}function Ze({className:s,...a}){const t=y(),n=D();m.useRef(null),m.useRef(null);const{register:r,handleSubmit:o}=A(),[d,l]=m.useState({}),f=async u=>{l({});try{const i=await I.login(u);if(i.success!=!1){const c=await I.getCurrentUser();c&&(n(U({userData:c})),P.success("Login successful!")),t("/Brown/dashboard")}else throw i}catch(i){const c={message:(i==null?void 0:i.message)||"An unknown error occurred",type:(i==null?void 0:i.type)||"unknown_error",code:(i==null?void 0:i.code)||500};P.error(`${c.message}`),l(c)}};return e.jsxs("div",{className:g("flex flex-col gap-6",s),...a,children:[e.jsxs(T,{children:[e.jsxs(Je,{className:"text-center",children:[e.jsx(W,{className:"text-xl",children:"Welcome back"}),e.jsx(Ye,{children:"Login To Start Reading !!"})]}),e.jsx(Q,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),"Login with Apple"]}),e.jsxs(j,{variant:"outline",className:"w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z",fill:"currentColor"})}),"Login with Google"]})]}),e.jsx("div",{className:"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t",children:e.jsx("span",{className:"bg-background text-muted-foreground relative z-10 px-2",children:"Or continue with"})}),e.jsx("form",{onSubmit:o(f),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(E,{htmlFor:"email",children:"Email"}),e.jsx(b,{id:"email",type:"email",placeholder:"m@example.com",...r("email",{required:!0,validate:{matchPattern:u=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(u)||"Email address must be a valid address"}})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{htmlFor:"password",children:"Password"}),e.jsx("a",{href:"#",className:"ml-auto text-sm underline-offset-4 hover:underline",children:"Forgot your password?"})]}),e.jsx(b,{id:"password",type:"password",...r("password",{required:!0})})]}),e.jsx(j,{type:"submit",className:"w-full",children:"Login"}),e.jsx(_,{richColors:!0,position:"top-right"})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(v,{to:"/Brown/sign-up",className:"underline underline-offset-4",children:"Sign up"})]})]})})]}),e.jsxs("div",{className:"text-muted-foreground *:[a]:hover:text-primary text-center text-xs text-balance *:[a]:underline *:[a]:underline-offset-4",children:["By clicking continue, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",e.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})}function et(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsx("div",{className:"flex w-full max-w-sm flex-col gap-6",children:e.jsx(Ze,{})})})}function tt({className:s,...a}){B(u=>u.status);const t=y(),n=D(),{register:r,handleSubmit:o}=A(),[d,l]=m.useState({}),f=async u=>{l({});try{const i=await I.createAccount(u);if(i.success!=!1){const c=await I.getCurrentUser();c&&(n(U({userData:c})),P.success("Account Created Successfully !")),setTimeout(()=>{t("/Brown")},3e3)}else throw i}catch(i){const c={message:(i==null?void 0:i.message)||"An unknown error occurred",type:(i==null?void 0:i.type)||"unknown_error",code:(i==null?void 0:i.code)||500};P.error(`${c.message}`),l(c)}};return e.jsxs("div",{className:g("flex flex-col gap-6",s),...a,children:[e.jsx(T,{children:e.jsx(Q,{children:e.jsx("div",{className:"grid gap-6",children:e.jsx("form",{onSubmit:o(f),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(E,{htmlFor:"username",children:"Username"}),e.jsx(b,{placeholder:"username",...r("name",{required:!0})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(E,{htmlFor:"email",children:"Email"}),e.jsx(b,{id:"email",type:"email",placeholder:"m@example.com",...r("email",{required:!0,validate:{matchPatern:u=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(u)||"Email address must be a valid address"}})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(E,{htmlFor:"password",children:"Password"})}),e.jsx(b,{id:"password",type:"password",...r("password",{required:!0})})]}),e.jsx(j,{type:"submit",className:"w-full",children:"SignUp"}),e.jsx(_,{richColors:!0,position:"top-right"})]})})})})}),e.jsxs("div",{className:"text-muted-foreground *:[a]:hover:text-primary text-center text-xs text-balance *:[a]:underline *:[a]:underline-offset-4",children:["By clicking continue, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",e.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})}function st(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsxs("div",{className:"flex w-full max-w-sm flex-col gap-6",children:[e.jsx(v,{to:"/Brown",className:"text-4xl font-extrabold font-cormorant-garamond flex items-center gap-2 self-center ",children:"Join Brown"}),e.jsx(tt,{})]})})}const at=m.forwardRef(({children:s,...a},t)=>e.jsx(fe,{...a,children:e.jsx(R,{ref:t,"data-slot":"select",children:s})}));function rt({...s}){return e.jsx(ye,{"data-slot":"select-group",...s})}function nt({...s}){return e.jsx(we,{"data-slot":"select-value",...s})}function lt({className:s,children:a,...t}){return e.jsxs(R,{"data-slot":"select-trigger",className:g("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[a,e.jsx(he,{asChild:!0,children:e.jsx(q,{className:"size-4 opacity-50"})})]})}function it({className:s,children:a,position:t="popper",...n}){return e.jsx(je,{children:e.jsxs(ve,{"data-slot":"select-content",className:g("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(ct,{}),e.jsx(be,{className:g("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(dt,{})]})})}function ot({className:s,...a}){return e.jsx(Ne,{"data-slot":"select-label",className:g("px-2 py-1.5 text-sm font-medium",s),...a})}function $({className:s,children:a,...t}){return e.jsxs(Se,{"data-slot":"select-item",className:g("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Pe,{children:e.jsx(Ie,{className:"size-4"})})}),e.jsx(Be,{children:a})]})}function ct({className:s,...a}){return e.jsx(ke,{"data-slot":"select-scroll-up-button",className:g("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Ce,{className:"size-4"})})}function dt({className:s,...a}){return e.jsx(Ee,{"data-slot":"select-scroll-down-button",className:g("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(q,{className:"size-4"})})}const J=({post:s})=>{const{register:a,handleSubmit:t,watch:n,setValue:r,control:o,getValues:d}=A({defaultValues:{title:(s==null?void 0:s.title)||"",slug:(s==null?void 0:s.slug)||"",content:(s==null?void 0:s.content)||"",status:(s==null?void 0:s.status)||"active"}}),l=y(),f=B(c=>c.userData),u=async c=>{var p;try{if(!c)throw new Error("Data not found ");if(s){const h=(p=c.image)!=null&&p[0]?await w.uploadFile(c.image[0]):null;if(!h)throw new Error("Error : Please Upload the New Image OR Reupload the same image");if(await w.deleteFile(s.featuredImage)!==!0)throw new Error("Error : Old Image was not Deleted");const N=await w.updatePost(s.$id,{...c,featuredImage:h?h.$id:null});if(!N)throw new Error("Failed to update the post. Please try again.");P.success("Post Updated Successfully !"),setTimeout(()=>{l(`/Brown/post/${N.$id}`)},3e3)}else{const h=await w.uploadFile(c.image[0]);if(!h)throw new Error("Error : File is not Uploaded");const k=h.$id;if(!k)throw new Error("Error : File Id not Received");c.featuredImage=k;const N=await w.createPost({...c,userId:f.$id});if(!N.$id)throw new Error(N.message);P.success("Post Created Successfully !"),setTimeout(()=>{l(`/Brown/post/${N==null?void 0:N.$id}`)},3e3)}}catch(h){const k={message:(h==null?void 0:h.message)||"An unknown error occurred",type:(h==null?void 0:h.type)||"unknown_error",code:(h==null?void 0:h.code)||500};P.error(`${k.message}`)}},i=m.useCallback(c=>{try{if(c&&typeof c=="string"){const p=c.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");if(!p)throw new Error("Slug generation failed. Please provide a valid input.");return p}}catch(p){const h={message:(p==null?void 0:p.message)||"An unknown error occurred",type:(p==null?void 0:p.type)||"unknown_error",code:(p==null?void 0:p.code)||500};P.error(`${h.message}`)}},[]);return De.useEffect(()=>{n((c,{name:p})=>{p==="title"&&r("slug",i(c.title,{shouldValidate:!0}))})}),e.jsxs("div",{children:[e.jsxs("form",{onSubmit:t(u),className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-2/3 px-2",children:[e.jsx(b,{label:"Title :",placeholder:"Title",className:"mb-4",...a("title",{required:!0})}),e.jsx(b,{label:"Slug :",placeholder:"Slug",className:"mb-4",...a("slug",{required:!0}),onInput:c=>{r("slug",i(c.currentTarget.value),{shouldValidate:!0})}}),e.jsx(Ke,{label:"Content :",name:"content",control:o,defaultValue:d("content")})]}),e.jsxs("div",{className:"w-1/3 px-2",children:[e.jsx(b,{label:"Featured Image :",type:"file",className:"mb-4",accept:"image/png, image/jpg, image/jpeg, image/gif",...a("image",{required:!s})}),s&&e.jsx("div",{className:"w-full mb-4",children:e.jsx("img",{src:w.getFilePreview(s.featuredImage),alt:s.title,className:"rounded-lg"})}),e.jsx(O,{name:"status",control:o,defaultValue:"",rules:{required:"Status is required"},render:({field:c})=>e.jsxs(at,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(lt,{className:"w-[180px]",children:e.jsx(nt,{placeholder:"Select the Status"})}),e.jsx(it,{children:e.jsxs(rt,{children:[e.jsx(ot,{children:"Status"}),e.jsx($,{value:"active",children:"Active"}),e.jsx($,{value:"inactive",children:"Inactive"})]})})]})}),e.jsx(j,{type:"submit",className:`w-full mt-4 ${s?"bg-green-500":""}`,children:s?"Update":"Submit"})]})]}),e.jsx(_,{richColors:!0,position:"top-right"})]})};function ut(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsx("div",{className:"flex w-full max-w-6xl flex-col gap-6",children:e.jsx(J,{})})})}class mt{constructor(){S(this,"adminClient",new Fe);S(this,"users");this.adminClient.setEndpoint(x.appwriteUrl).setProject(x.appwriteProjectId).setKey(x.appwriteApiKey),this.users=new Ae(this.adminClient)}async getUserfromUserID(a){try{return await this.users.get(a)}catch{console.log("Appwrite service :: getUserfromUserID:: error")}return{success:!1,message:error==null?void 0:error.message,type:(error==null?void 0:error.type)||"unknown_error",code:(error==null?void 0:error.code)||500}}}const X=new mt,xt=()=>{const s=B(l=>l.status),a=y(),[t,n]=m.useState([]),[r,o]=m.useState({});m.useEffect(()=>{s==!0?w.getPosts([]).then(l=>{if(l){n(l.documents);const f=l.documents.map(i=>i.userId),u={};Promise.all(f.map(i=>X.getUserfromUserID(i).then(c=>({userId:i,userName:c.name})))).then(i=>{i.forEach(({userId:c,userName:p})=>{u[c]=p}),o(u)})}}):a("/Brown/login")},[s,a]);const d=l=>{if(l){const f=document.createElement("div"),u=V(l),i=Le.renderToStaticMarkup(u);return f.innerHTML=i,f.innerText}return""};return s==!0?e.jsx("div",{className:"flex flex-col items-center p-6",children:e.jsxs("div",{className:"w-full max-w-5xl flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(F,{children:e.jsx("div",{className:"flex flex-col gap-6",children:t.map(l=>e.jsxs(T,{$id:l.$id,className:"flex flex-row items-start p-4 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsxs("div",{className:"text-sm pb-2",children:["Post By ",r[l.userId]]}),e.jsx(W,{className:"text-2xl font-bold mb-2",children:l.title}),e.jsx("p",{className:"text-gray-800 text-base mb-2",children:d(l.content).split(" ").slice(0,8).join(" ")+"..."}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:new Date(l.$createdAt).toDateString()})]}),e.jsx(Xe,{featuredImage:l.featuredImage,alt:l.title,className:"w-32 h-24 object-cover rounded-md"})]},l.$id))})})}),e.jsxs("div",{className:"bg-blue-100 max-h-50 p-4 rounded-lg shadow-md w-80 relative",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Writing on Brown"}),e.jsxs("ul",{className:"text-sm text-gray-800 space-y-1 mb-4",children:[e.jsx("li",{className:"font-semibold",children:"New writer FAQ"}),e.jsx("li",{className:"font-semibold",children:"Expert writing advice"}),e.jsx("li",{className:"font-semibold",children:"Grow your readership"})]}),e.jsx(j,{children:e.jsx(v,{to:"/Brown/post",children:" Start writing "})})]})]})}):e.jsx("div",{children:"Redirecting..."})},gt=()=>{const[s,a]=m.useState(null),{slug:t}=H(),n=y();return m.useEffect(()=>{t?w.getPost(t).then(r=>{r&&a(r)}):n("/Brown")},[t,n]),s?e.jsx("div",{className:"my-8 mx-8 border-2 border-black",children:e.jsx(F,{children:e.jsx(J,{post:s})})}):null};function pt(){const[s,a]=m.useState(null),[t,n]=m.useState(""),{slug:r}=H(),o=y(),d=B(u=>u.userData),l=s&&d?s.userId===d.$id:!1;m.useEffect(()=>{r?w.getPost(r).then(u=>{u?(a(u),X.getUserfromUserID(u.userId).then(i=>i).then(i=>n(i.name)).catch(i=>console.error("Error fetching user:",i))):o("/Brown")}):o("/Brown")},[r,o]);const f=()=>{w.deletePost(s.$id).then(u=>{u&&(w.deleteFile(s.featuredImage),o("/Brown"))})};return s?s.status=="active"||l==!0?e.jsx("div",{className:"py-12 bg-gray-100 min-h-screen",children:e.jsx(F,{children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white shadow-md rounded-xl p-6",children:[e.jsx("h1",{className:"text-3xl font-extrabold mb-4",children:s.title}),e.jsxs("div",{className:"text-gray-500 ",children:["Written By ",t]}),e.jsx("div",{className:"text-gray-500 mb-4",children:new Date(s.$createdAt).toDateString()}),e.jsx("div",{className:"w-full flex justify-center mb-6",children:e.jsx("img",{src:w.getFilePreview(s.featuredImage),alt:s.title,className:"rounded-xl w-full object-cover"})}),e.jsx("div",{className:"prose prose-lg text-gray-800",children:V(s.content)}),l&&e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(v,{to:`/Brown/edit-post/${s.$id}`,children:e.jsx(j,{className:"bg-blue-600 text-white",children:"Edit"})}),e.jsx(j,{variant:"destructive",onClick:f,children:"Delete"})]})]})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-gradient-to-r from-yellow-100 to-yellow-50 border-l-4 border-yellow-500 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-ping"}),e.jsx("p",{className:"text-yellow-700 font-semibold text-lg",children:"This post is under progress."})]}),e.jsx("p",{className:"text-yellow-600 text-sm mt-2",children:"Please check back later."})]}):null}const ft=()=>e.jsxs("div",{className:"flex flex-col justify-center items-start min-h-[83vh] bg-[#f7f4ed] text-black pl-30 max-[1024px]:pl-20 max-[768px]:pl-10 max-[409px]:pl-6 ",children:[e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("h1",{className:"flex flex-col items-start font-stix_two_test font-semibold",children:[e.jsx("div",{className:"text-8xl max-[768px]:text-6xl max-[409px]:text-5xl max-[332px]:text-4xl",children:"Human"}),e.jsx("div",{className:"text-8xl max-[768px]:text-6xl max-[409px]:text-5xl max-[332px]:text-4xl",children:"stories & ideas"})]}),e.jsx("p",{className:"text-xl max-[768px]:text-lg max-[409px]:text-base max-[332px]:text-sm mt-4 text-gray-700 font-roboto",children:"A place to read, write, and deepen your understanding"}),e.jsx(v,{to:"/Brown/dashboard",children:e.jsx(j,{className:"mt-6 px-8 py-4 text-lg font-medium bg-black text-white rounded-full hover:bg-gray-900 transition-all max-[768px]:bg-green-500 ",children:"Start reading"})})]}),e.jsx("img",{src:"/img2.jpg",alt:"Decorative Image",className:"fixed right-1 top-19 max-w-[610px] max-[1355px]:hidden "})]}),ht=()=>e.jsxs("div",{class:"bg-indigo-900 relative overflow-hidden h-screen",children:[e.jsx("img",{src:"https://external-preview.redd.it/4MddL-315mp40uH18BgGL2-5b6NIPHcDMBSWuN11ynM.jpg?width=960&crop=smart&auto=webp&s=b98d54a43b3dac555df398588a2c791e0f3076d9",class:"absolute h-full w-full object-cover"}),e.jsx("div",{class:"inset-0 bg-black opacity-25 absolute"}),e.jsx("div",{class:"container mx-auto px-6 md:px-12 relative z-10 flex items-center py-32 xl:py-40",children:e.jsxs("div",{class:"w-full font-mono flex flex-col items-center relative z-10",children:[e.jsx("h1",{class:"font-extrabold text-5xl text-center text-white leading-tight mt-4",children:"You are all alone here"}),e.jsx("p",{class:"font-extrabold text-8xl my-44 text-white animate-bounce",children:"404"})]})})]}),wt=_e([{path:"/Brown/",element:e.jsx(We,{}),children:[{path:"/Brown/",element:e.jsx(ft,{})},{path:"login",element:e.jsx(C,{authentication:!1,children:e.jsx(et,{})})},{path:"sign-up",element:e.jsx(C,{authentication:!1,children:e.jsx(st,{})})},{path:"post",element:e.jsx(C,{authentication:!0,children:e.jsx(ut,{})})},{path:"dashboard",element:e.jsx(C,{authentication:!0,children:e.jsx(xt,{})})},{path:"edit-post/:slug",element:e.jsx(C,{authentication:!0,children:e.jsx(gt,{})})},{path:"post/:slug",element:e.jsx(pt,{})},{},{path:"*",element:e.jsx(ht,{})}]}]);$e.createRoot(document.getElementById("root")).render(e.jsx(Ue,{store:Ge,children:e.jsx(m.StrictMode,{children:e.jsx(Te,{router:wt})})}));

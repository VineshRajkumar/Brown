var G=Object.defineProperty;var Q=(s,a,t)=>a in s?G(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var N=(s,a,t)=>Q(s,typeof a!="symbol"?a+"":a,t);import{t as J,g as X,j as e,S as Y,i as Z,u as k,k as w,L as v,F as ee,C as _,A as te,I as B,m as se,n as F,R as ae,p as re,c as h,q as ne,E as le,v as ie,O as ce,D as oe,w as de,Q as ue,x as me,y as U,T as $,z as P,B as xe,G as ge,H as fe,U as he,J as O,K as q,M as pe,P as be,N as je}from"./vendor-EETDV38_.js";import{c as ve}from"./react-dom-client-Cz0k48IK.js";import{s as we}from"./react-dom-server-DCn_G-I1.js";import"./react-dom-CasmKw4n.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}})();function j(...s){return J(X(s))}const ye=Z("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function b({className:s,variant:a,size:t,asChild:n=!1,...r}){const c=n?Y:"button";return e.jsx(c,{"data-slot":"button",className:j(ye({variant:a,size:t,className:s})),...r})}const Ne=()=>{const s=k(n=>n.status),a=w(),t=[{name:"Our Story",slug:"/"},{name:"Membership",slug:"/"},{name:"Write",slug:"/post"}];return e.jsx(e.Fragment,{children:e.jsx(A,{children:e.jsx("nav",{className:"p-4  border-1 border-b-black bg-[#f7f4ed] ",children:e.jsxs("div",{className:"container mx-auto flex flex-row justify-between items-center",children:[e.jsx(v,{to:"/",className:"text-4xl font-extrabold font-cormorant-garamond ",children:"Brown"}),s?e.jsxs("div",{className:"flex justify-evenly gap-x-6 px-9 cursor-pointer",children:[e.jsxs("div",{className:"flex flex-row items-center gap-x-2",children:[e.jsx(v,{to:"/dashboard",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:e.jsx(b,{className:"  font-roboto text-sm font-medium  ",children:"Dashboard"})}),e.jsx(v,{to:"/post",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:e.jsxs(b,{className:"font-roboto text-sm font-medium  ",children:[e.jsx(ee,{}),"Write"]})})]}),e.jsx(Ee,{})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-evenly gap-x-6 px-9 cursor-pointer",children:[t.map(n=>e.jsx("div",{className:"my-auto font-roboto text-sm max-[725px]:hidden",children:e.jsx("div",{onClick:()=>a(n.slug),children:n.name})},n.name)),e.jsx(v,{to:"/login",className:"my-auto font-roboto text-sm max-[547px]:hidden",children:"Sign in"}),e.jsx(v,{to:"/sign-up",children:e.jsx(b,{className:" rounded-3xl font-roboto text-sm font-medium  ",children:"Get started"})})]})})]})})})})},Pe=()=>{const s=w(),a=[{name:"Help",slug:"/help",class:""},{name:"Status",slug:"/",class:"max-[903px]:hidden"},{name:"About",slug:"/about",class:""},{name:"Carrer",slug:"/",class:"max-[903px]:hidden"},{name:"Press",slug:"/",class:"max-[903px]:hidden"},{name:"Blog",slug:"/",class:"max-[903px]:hidden"},{name:"Privacy",slug:"/",class:""},{name:"Terms",slug:"/",class:""},{name:"Text To Speech",slug:"/",class:"max-[903px]:hidden"},{name:"Teams",slug:"/",class:"max-[903px]:hidden"}];return e.jsx("div",{children:e.jsx("div",{className:"p-4  border-1 border-black bg-[#f7f4ed] max-[903px]:bg-black max-[903px]:text-white ",children:e.jsx("div",{className:"container  flex flex-row justify-center items-center max-[903px]:justify-start   ",children:e.jsx("div",{className:"flex justify-evenly gap-x-6 px-9 ",children:a.map(t=>e.jsx("div",{className:t.class,children:e.jsx("div",{className:"my-auto font-roboto text-xs font-medium cursor-pointer ",onClick:()=>s(t.slug),children:t.name})},t.name))})})})})},A=({children:s})=>e.jsx("div",{className:"bg-[#f7f4ed]",children:s}),m={appwriteUrl:"https://cloud.appwrite.io/v1",appwriteProjectId:"67bea9dd0027041cae88",appwriteDatabaseId:"67beab91001bd1ccb940",appwriteCollectionId:"67beabb60000b4e9489e",appwriteBucketId:"67bead4f0029938642e9",appwriteApiKey:"standard_bc28567a5b119a2404dec9656a85f4f1517f2a71ab993feadff4bb771d2f33b4bd62c622a33a4bf8710dc12fa4054b2380c1948d167831f008a965363f683e884eee90ac730ffa702e61c5ca729488d144da03d52c90262a4c3bbdd97f84e9a6ae28f910c4f10bc8fe2011402379e81c5be218b566d53ce969ad664a0e194599",tinymceApiKey:"nbnl3lm5o8i1i7fbh1q5ytyyofu7q1w5gvj3bouk4502a10b"};class Se{constructor(){N(this,"client",new _);N(this,"account");this.client.setEndpoint(m.appwriteUrl).setProject(m.appwriteProjectId),this.account=new te(this.client)}async createAccount({email:a,password:t,name:n}){try{const r=await this.account.create(B.unique(),a,t,n);return r&&this.login({email:a,password:t})}catch(r){return console.log("Appwrite service :: createAccount :: error"),{success:!1,message:r==null?void 0:r.message,type:(r==null?void 0:r.type)||"unknown_error",code:(r==null?void 0:r.code)||500}}}async login({email:a,password:t}){try{return await this.account.createEmailPasswordSession(a,t)}catch(n){return console.log("Appwrite service :: login :: error"),{success:!1,message:n==null?void 0:n.message,type:(n==null?void 0:n.type)||"unknown_error",code:(n==null?void 0:n.code)||500}}}async getCurrentUser(){try{return await this.account.get()}catch{console.log("Appwrite service :: getCurrentUser :: error")}return{success:!1,message:error==null?void 0:error.message,type:(error==null?void 0:error.type)||"unknown_error",code:(error==null?void 0:error.code)||500}}async logout(){try{await this.account.deleteSessions()}catch(a){console.log("Appwrite service :: logout :: error",a)}}}const I=new Se,Ie={status:!1,userData:null},R=se({name:"auth",initialState:Ie,reducers:{login:(s,a)=>{if(!a.payload||!a.payload.userData){console.log("login: Invalid action payload",a.payload);return}s.status=!0,s.userData=a.payload.userData},logout:(s,a)=>{s.status=!1,s.userData=null}}}),{login:L,logout:z}=R.actions,ke=R.reducer,Ee=()=>{const s=F(),a=()=>{I.logout().then(()=>{s(z())}).catch(t=>console.log("Error Logging Out User LogoutBtn.jsx :: LogoutBtn :: error",t))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row gap-x-4",children:[e.jsx(b,{className:"rounded-3xl font-roboto text-sm font-medium ",onClick:a,children:"Logout"}),e.jsx("img",{className:"w-10 h-10 rounded-full",src:"https://flowbite.com/docs/images/people/profile-picture-5.jpg"})]})})};function H({className:s,value:a,...t}){return e.jsx(ae,{"data-slot":"progress",className:j("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...t,children:e.jsx(re,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}const C=({children:s,authentication:a=!0})=>{const t=w(),[n,r]=h.useState(!0),[c,o]=h.useState(0),i=k(f=>f.status);return h.useEffect(()=>{a&&i!==a?t("/login"):!a&&i!==a&&t("/dashboard");let f=setInterval(()=>{o(u=>u>=100?(clearInterval(f),100):u+10)},100);return setTimeout(()=>{clearInterval(f),r(!1)},1e3),()=>clearInterval(f)},[i,t,a]),n?e.jsxs("div",{children:[e.jsx(H,{value:c}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[83vh] bg-black text-white",children:[e.jsx("div",{className:"relative w-16 h-16 border-4 border-gray-500 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Please wait..."})]})]}):e.jsxs(e.Fragment,{children:[" ",s," "]})},Ce=({name:s,control:a,label:t,defaultValue:n=""})=>e.jsxs("div",{children:[e.jsx("div",{className:"w-full",children:t&&e.jsx("label",{className:"inline-block mb-1 pl-1",children:t})}),e.jsx(ne,{name:s,control:a,render:({field:{onChange:r}})=>e.jsx(le,{apiKey:m.tinymceApiKey,initialValue:n,init:{height:500,menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onEditorChange:r})})]}),De=ie({reducer:ke}),Fe=()=>{const[s,a]=h.useState(!0),[t,n]=h.useState(0),r=F();return h.useEffect(()=>{I.getCurrentUser().then(o=>r(o?L({userData:o}):z())).catch(o=>console.log("Error fetching user:",o));let c=setInterval(()=>{n(o=>o>=100?(clearInterval(c),100):o+10)},200);return setTimeout(()=>{clearInterval(c),a(!1)},2e3),()=>clearInterval(c)},[r]),s?e.jsxs("div",{children:[e.jsx(H,{value:t}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-black text-white",children:[e.jsx("div",{className:"relative w-16 h-16 border-4 border-gray-500 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Please wait..."})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"layout min-h-screen flex flex-col",children:[e.jsx(Ne,{}),e.jsx("main",{className:"content flex-grow",children:e.jsx(ce,{})}),e.jsx(Pe,{className:"mt-auto"})]})})};class Ae{constructor(){N(this,"client",new _);N(this,"databases");N(this,"bucket");this.client.setEndpoint(m.appwriteUrl).setProject(m.appwriteProjectId),this.databases=new oe(this.client),this.bucket=new de(this.client)}async createPost({title:a,slug:t,content:n,featuredImage:r,status:c,userId:o}){try{return await this.databases.createDocument(m.appwriteDatabaseId,m.appwriteCollectionId,t,{title:a,content:n,featuredImage:r,status:c,userId:o})}catch(i){return console.log("Appwrite service :: createPost :: error"),{success:!1,message:i==null?void 0:i.message,type:(i==null?void 0:i.type)||"unknown_error",code:(i==null?void 0:i.code)||500}}}async updatePost(a,{title:t,content:n,featuredImage:r,status:c}){try{return await this.databases.updateDocument(m.appwriteDatabaseId,m.appwriteCollectionId,a,{title:t,content:n,featuredImage:r,status:c})}catch(o){return console.log("Appwrite service :: updatePost :: error"),{success:!1,message:o==null?void 0:o.message,type:(o==null?void 0:o.type)||"unknown_error",code:(o==null?void 0:o.code)||500}}}async deletePost(a){try{return await this.databases.deleteDocument(m.appwriteDatabaseId,m.appwriteCollectionId,a),!0}catch(t){return console.log("Appwrite service :: deletePost :: error"),{success:!1,message:(t==null?void 0:t.message)||!1,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async getPost(a){try{return await this.databases.getDocument(m.appwriteDatabaseId,m.appwriteCollectionId,a)}catch(t){return console.log("Appwrite service :: getPost :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async getPosts(a=[ue.equal("status","active")]){try{return await this.databases.getDocument(m.appwriteDatabaseId,m.appwriteCollectionId,a)}catch(t){return console.log("Appwrite service :: getPosts :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async uploadFile(a){try{return await this.bucket.createFile(m.appwriteBucketId,B.unique(),a)}catch(t){return console.log("Appwrite service :: uploadFile :: error"),{success:!1,message:t==null?void 0:t.message,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}async deleteFile(a){try{return await this.bucket.deleteFile(m.appwriteBucketId,a),!0}catch(t){return console.log("Appwrite service :: deleteFile :: error"),{success:!1,message:(t==null?void 0:t.message)||!1,type:(t==null?void 0:t.type)||"unknown_error",code:(t==null?void 0:t.code)||500}}}getFilePreview(a){return this.bucket.getFilePreview(m.appwriteBucketId,a)}}const p=new Ae;function T({$id:s,className:a,...t}){return s?e.jsx(v,{to:`/post/${s}`,"data-slot":"card",className:j("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t}):e.jsx("div",{"data-slot":"card",className:j("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm ",a),...t})}function Ue({className:s,...a}){return e.jsx("div",{"data-slot":"card-header",className:j("flex flex-col gap-1.5 px-6",s),...a})}function M({className:s,...a}){return e.jsx("div",{"data-slot":"card-title",className:j("leading-none font-semibold",s),...a})}function $e({className:s,featuredImage:a="",...t}){return e.jsx("img",{src:p.getFilePreview(a),alt:"Image Here","data-slot":"card-image",className:j("",s),...t})}function Le({className:s,...a}){return e.jsx("div",{"data-slot":"card-description",className:j("text-muted-foreground text-sm",s),...a})}function V({className:s,...a}){return e.jsx("div",{"data-slot":"card-content",className:j("px-6",s),...a})}function S({className:s,type:a,...t}){return e.jsx("input",{type:a,"data-slot":"input",className:j("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t})}function D({className:s,...a}){return e.jsx(me,{"data-slot":"label",className:j("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}function Te({className:s,...a}){const t=w(),n=F(),{register:r,handleSubmit:c}=U(),[o,i]=h.useState({}),f=async u=>{i({});try{const l=await I.login(u);if(l.success!=!1){const d=await I.getCurrentUser();d&&(n(L({userData:d})),P.success("Login successful!")),t("/dashboard")}else throw l}catch(l){const d={message:(l==null?void 0:l.message)||"An unknown error occurred",type:(l==null?void 0:l.type)||"unknown_error",code:(l==null?void 0:l.code)||500};P.error(`${d.message}`),i(d)}};return e.jsxs("div",{className:j("flex flex-col gap-6",s),...a,children:[e.jsxs(T,{children:[e.jsxs(Ue,{className:"text-center",children:[e.jsx(M,{className:"text-xl",children:"Welcome back"}),e.jsx(Le,{children:"Login To Start Reading !!"})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(b,{variant:"outline",className:"w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),"Login with Apple"]}),e.jsxs(b,{variant:"outline",className:"w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z",fill:"currentColor"})}),"Login with Google"]})]}),e.jsx("div",{className:"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t",children:e.jsx("span",{className:"bg-background text-muted-foreground relative z-10 px-2",children:"Or continue with"})}),e.jsx("form",{onSubmit:c(f),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(D,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",type:"email",placeholder:"m@example.com",...r("email",{required:!0,validate:{matchPatern:u=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(u)||"Email address must be a valid address"}})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{htmlFor:"password",children:"Password"}),e.jsx("a",{href:"#",className:"ml-auto text-sm underline-offset-4 hover:underline",children:"Forgot your password?"})]}),e.jsx(S,{id:"password",type:"password",...r("password",{required:!0})})]}),e.jsx(b,{type:"submit",className:"w-full",children:"Login"}),e.jsx($,{richColors:!0,position:"top-right"})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(v,{to:"/sign-up",className:"underline underline-offset-4",children:"Sign up"})]})]})})]}),e.jsxs("div",{className:"text-muted-foreground *:[a]:hover:text-primary text-center text-xs text-balance *:[a]:underline *:[a]:underline-offset-4",children:["By clicking continue, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",e.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})}function _e(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsx("div",{className:"flex w-full max-w-sm flex-col gap-6",children:e.jsx(Te,{})})})}function Be({className:s,...a}){k(u=>u.status);const t=w(),n=F(),{register:r,handleSubmit:c}=U(),[o,i]=h.useState({}),f=async u=>{i({});try{const l=await I.createAccount(u);if(l.success!=!1){const d=await I.getCurrentUser();d&&(n(L({userData:d})),P.success("Account Created Successfully !")),setTimeout(()=>{t("/")},3e3)}else throw l}catch(l){const d={message:(l==null?void 0:l.message)||"An unknown error occurred",type:(l==null?void 0:l.type)||"unknown_error",code:(l==null?void 0:l.code)||500};P.error(`${d.message}`),i(d)}};return e.jsxs("div",{className:j("flex flex-col gap-6",s),...a,children:[e.jsx(T,{children:e.jsx(V,{children:e.jsx("div",{className:"grid gap-6",children:e.jsx("form",{onSubmit:c(f),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(D,{htmlFor:"username",children:"Username"}),e.jsx(S,{placeholder:"username",...r("name",{required:!0})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(D,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",type:"email",placeholder:"m@example.com",...r("email",{required:!0,validate:{matchPatern:u=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(u)||"Email address must be a valid address"}})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(D,{htmlFor:"password",children:"Password"})}),e.jsx(S,{id:"password",type:"password",...r("password",{required:!0})})]}),e.jsx(b,{type:"submit",className:"w-full",children:"SignUp"}),e.jsx($,{richColors:!0,position:"top-right"})]})})})})}),e.jsxs("div",{className:"text-muted-foreground *:[a]:hover:text-primary text-center text-xs text-balance *:[a]:underline *:[a]:underline-offset-4",children:["By clicking continue, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",e.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})}function Oe(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsxs("div",{className:"flex w-full max-w-sm flex-col gap-6",children:[e.jsx(v,{to:"/",className:"text-4xl font-extrabold font-cormorant-garamond flex items-center gap-2 self-center ",children:"Join Brown"}),e.jsx(Be,{})]})})}function qe({...s}){return e.jsx(xe,{"data-slot":"select",...s})}const K=({post:s})=>{const{register:a,handleSubmit:t,watch:n,setValue:r,control:c,getValues:o}=U({defaultValues:{title:(s==null?void 0:s.title)||"",slug:(s==null?void 0:s.slug)||"",content:(s==null?void 0:s.content)||"",status:(s==null?void 0:s.status)||"active"}}),i=w(),f=k(d=>d.userData),u=async d=>{var x;try{if(!d)throw new Error("Data not found ");if(console.log(d),s){const g=(x=d.image)!=null&&x[0]?await p.uploadFile(d.image[0]):null;if(console.log(g),!g)throw new Error("Error : Please Upload the New Image OR Reupload the same image");if(console.log(s.featuredImage),await p.deleteFile(s.featuredImage)!==!0)throw new Error("Error : Old Image was not Deleted");const y=await p.updatePost(s.$id,{...d,featuredImage:g?g.$id:void 0});if(!y)throw new Error("Failed to update the post. Please try again.");P.success("Post Updated Successfully !"),setTimeout(()=>{i(`/post/${y.$id}`)},3e3)}else{const g=await p.uploadFile(d.image[0]);if(!g)throw new Error("Error : File is not Uploaded");const E=g.$id;if(!E)throw new Error("Error : File Id not Received");d.featuredImage=E;const y=await p.createPost({...d,userId:f.$id});if(!y.$id)throw new Error(y.message);P.success("Post Created Successfully !"),setTimeout(()=>{i(`/post/${y==null?void 0:y.$id}`)},3e3)}}catch(g){const E={message:(g==null?void 0:g.message)||"An unknown error occurred",type:(g==null?void 0:g.type)||"unknown_error",code:(g==null?void 0:g.code)||500};P.error(`${E.message}`)}},l=h.useCallback(d=>{try{if(d&&typeof d=="string"){const x=d.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");if(!x)throw new Error("Slug generation failed. Please provide a valid input.");return x}}catch(x){const g={message:(x==null?void 0:x.message)||"An unknown error occurred",type:(x==null?void 0:x.type)||"unknown_error",code:(x==null?void 0:x.code)||500};P.error(`${g.message}`)}},[]);return ge.useEffect(()=>{n((d,{name:x})=>{x==="title"&&r("slug",l(d.title,{shouldValidate:!0}))})}),e.jsxs("div",{children:[e.jsxs("form",{onSubmit:t(u),className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-2/3 px-2",children:[e.jsx(S,{label:"Title :",placeholder:"Title",className:"mb-4",...a("title",{required:!0})}),e.jsx(S,{label:"Slug :",placeholder:"Slug",className:"mb-4",...a("slug",{required:!0}),onInput:d=>{r("slug",l(d.currentTarget.value),{shouldValidate:!0})}}),e.jsx(Ce,{label:"Content :",name:"content",control:c,defaultValue:o("content")})]}),e.jsxs("div",{className:"w-1/3 px-2",children:[e.jsx(S,{label:"Featured Image :",type:"file",className:"mb-4",accept:"image/png, image/jpg, image/jpeg, image/gif",...a("image",{required:!s})}),s&&e.jsx("div",{className:"w-full mb-4",children:e.jsx("img",{src:p.getFilePreview(s.featuredImage),alt:s.title,className:"rounded-lg"})}),e.jsx(qe,{options:["active","inactive"],label:"Status",className:"mb-4",...a("status",{required:!0})}),e.jsx(b,{type:"submit",bgColor:s?"bg-green-500":void 0,className:"w-full",children:s?"Update":"Submit"})]})]}),e.jsx($,{richColors:!0,position:"top-right"})]})};function Re(){return e.jsx("div",{className:"bg-[#f7f4ed] flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsx("div",{className:"flex w-full max-w-6xl flex-col gap-6",children:e.jsx(K,{})})})}class ze{constructor(){N(this,"adminClient",new fe);N(this,"users");this.adminClient.setEndpoint(m.appwriteUrl).setProject(m.appwriteProjectId).setKey(m.appwriteApiKey),this.users=new he(this.adminClient)}async getUserfromUserID(a){try{return await this.users.get(a)}catch{console.log("Appwrite service :: getUserfromUserID:: error")}return{success:!1,message:error==null?void 0:error.message,type:(error==null?void 0:error.type)||"unknown_error",code:(error==null?void 0:error.code)||500}}}const W=new ze,He=()=>{const s=k(i=>i.status),a=w(),[t,n]=h.useState([]),[r,c]=h.useState({});h.useEffect(()=>{s==!0?p.getPosts([]).then(i=>{if(i){n(i.documents);const f=i.documents.map(l=>l.userId),u={};Promise.all(f.map(l=>W.getUserfromUserID(l).then(d=>({userId:l,userName:d.name})))).then(l=>{l.forEach(({userId:d,userName:x})=>{u[d]=x}),c(u)})}}):a("/login")},[s,a]);const o=i=>{if(i){const f=document.createElement("div"),u=O(i),l=we.renderToStaticMarkup(u);return f.innerHTML=l,f.innerText}return""};return s==!0?e.jsx("div",{className:"flex flex-col items-center p-6",children:e.jsxs("div",{className:"w-full max-w-5xl flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(A,{children:e.jsx("div",{className:"flex flex-col gap-6",children:t.map(i=>e.jsxs(T,{$id:i.$id,className:"flex flex-row items-start p-4 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsxs("div",{className:"text-sm pb-2",children:["Post By ",r[i.userId]]}),e.jsx(M,{className:"text-2xl font-bold mb-2",children:i.title}),e.jsx("p",{className:"text-gray-800 text-base mb-2",children:o(i.content).split(" ").slice(0,8).join(" ")+"..."}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:new Date(i.$createdAt).toDateString()})]}),e.jsx($e,{featuredImage:i.featuredImage,alt:i.title,className:"w-32 h-24 object-cover rounded-md"})]},i.$id))})})}),e.jsxs("div",{className:"bg-blue-100 max-h-50 p-4 rounded-lg shadow-md w-80 relative",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Writing on Brown"}),e.jsxs("ul",{className:"text-sm text-gray-800 space-y-1 mb-4",children:[e.jsx("li",{className:"font-semibold",children:"New writer FAQ"}),e.jsx("li",{className:"font-semibold",children:"Expert writing advice"}),e.jsx("li",{className:"font-semibold",children:"Grow your readership"})]}),e.jsx(b,{children:e.jsx(v,{to:"/post",children:" Start writing "})})]})]})}):e.jsx("div",{children:"Redirecting..."})},Me=()=>{const[s,a]=h.useState(null),{slug:t}=q(),n=w();return h.useEffect(()=>{t?p.getPost(t).then(r=>{r&&(a(r),console.log(r))}):n("/")},[t,n]),s?e.jsx("div",{className:"my-8 mx-8 border-2 border-black",children:e.jsx(A,{children:e.jsx(K,{post:s})})}):null};function Ve(){const[s,a]=h.useState(null),[t,n]=h.useState(""),{slug:r}=q(),c=w(),o=k(u=>u.userData),i=s&&o?s.userId===o.$id:!1;h.useEffect(()=>{r?p.getPost(r).then(u=>{u?(a(u),W.getUserfromUserID(u.userId).then(l=>l).then(l=>n(l.name)).catch(l=>console.error("Error fetching user:",l))):c("/")}):c("/")},[r,c]);const f=()=>{p.deletePost(s.$id).then(u=>{u&&(p.deleteFile(s.featuredImage),c("/"))})};return s?e.jsx("div",{className:"py-12 bg-gray-100 min-h-screen",children:e.jsx(A,{children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white shadow-md rounded-xl p-6",children:[e.jsx("h1",{className:"text-3xl font-extrabold mb-4",children:s.title}),e.jsxs("div",{className:"text-gray-500 ",children:["Written By ",t]}),e.jsx("div",{className:"text-gray-500 mb-4",children:new Date(s.$createdAt).toDateString()}),e.jsx("div",{className:"w-full flex justify-center mb-6",children:e.jsx("img",{src:p.getFilePreview(s.featuredImage),alt:s.title,className:"rounded-xl w-full object-cover"})}),e.jsx("div",{className:"prose prose-lg text-gray-800",children:O(s.content)}),i&&e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(v,{to:`/edit-post/${s.$id}`,children:e.jsx(b,{className:"bg-blue-600 text-white",children:"Edit"})}),e.jsx(b,{variant:"destructive",onClick:f,children:"Delete"})]})]})})}):null}const Ke=()=>e.jsxs("div",{className:"flex flex-col justify-center items-start min-h-[83vh] bg-[#f7f4ed] text-black pl-30 max-[1024px]:pl-20 max-[768px]:pl-10 max-[409px]:pl-6 ",children:[e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("h1",{className:"flex flex-col items-start font-stix_two_test font-semibold",children:[e.jsx("div",{className:"text-8xl max-[768px]:text-6xl max-[409px]:text-5xl max-[332px]:text-4xl",children:"Human"}),e.jsx("div",{className:"text-8xl max-[768px]:text-6xl max-[409px]:text-5xl max-[332px]:text-4xl",children:"stories & ideas"})]}),e.jsx("p",{className:"text-xl max-[768px]:text-lg max-[409px]:text-base max-[332px]:text-sm mt-4 text-gray-700 font-roboto",children:"A place to read, write, and deepen your understanding"}),e.jsx(v,{to:"/dashboard",children:e.jsx(b,{className:"mt-6 px-8 py-4 text-lg font-medium bg-black text-white rounded-full hover:bg-gray-900 transition-all max-[768px]:bg-green-500 ",children:"Start reading"})})]}),e.jsx("img",{src:"/img2.jpg",alt:"Decorative Image",className:"fixed right-1 top-19 max-w-[610px] max-[1355px]:hidden "})]}),We=()=>e.jsxs("div",{class:"bg-indigo-900 relative overflow-hidden h-screen",children:[e.jsx("img",{src:"https://external-preview.redd.it/4MddL-315mp40uH18BgGL2-5b6NIPHcDMBSWuN11ynM.jpg?width=960&crop=smart&auto=webp&s=b98d54a43b3dac555df398588a2c791e0f3076d9",class:"absolute h-full w-full object-cover"}),e.jsx("div",{class:"inset-0 bg-black opacity-25 absolute"}),e.jsx("div",{class:"container mx-auto px-6 md:px-12 relative z-10 flex items-center py-32 xl:py-40",children:e.jsxs("div",{class:"w-full font-mono flex flex-col items-center relative z-10",children:[e.jsx("h1",{class:"font-extrabold text-5xl text-center text-white leading-tight mt-4",children:"You are all alone here"}),e.jsx("p",{class:"font-extrabold text-8xl my-44 text-white animate-bounce",children:"404"})]})})]}),Ge=pe([{path:"/",element:e.jsx(Fe,{}),children:[{path:"/",element:e.jsx(Ke,{})},{path:"login",element:e.jsx(C,{authentication:!1,children:e.jsx(_e,{})})},{path:"sign-up",element:e.jsx(C,{authentication:!1,children:e.jsx(Oe,{})})},{path:"post",element:e.jsx(C,{authentication:!0,children:e.jsx(Re,{})})},{path:"dashboard",element:e.jsx(C,{authentication:!0,children:e.jsx(He,{})})},{path:"edit-post/:slug",element:e.jsx(C,{authentication:!0,children:e.jsx(Me,{})})},{path:"post/:slug",element:e.jsx(Ve,{})},{},{path:"*",element:e.jsx(We,{})}]}]);ve.createRoot(document.getElementById("root")).render(e.jsx(be,{store:De,children:e.jsx(h.StrictMode,{children:e.jsx(je,{router:Ge})})}));
